<mvc:View xmlns:cards="sap.f.cards" controllerName="rfidwarehousesuiteui.controller.StorageLocationMasters"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:f="sap.f" displayBlock="true">

    <Page title="{i18n>Storagepage.title}" showNavButton="false" class="sapUiResponsiveContentPadding">
        <content>
            <HBox class="sapUiSmallMarginBottom" justifyContent="SpaceBetween" gap="-3rem" wrap="Wrap">

                <VBox class="card" alignItems="Center">
                    <Title text="{i18n>card.totalLocations}" class="cardTitle" wrapping="true" />
                    <ObjectStatus text="2,456" state="Information" class="sapUiTinyMarginTop sapUiTinyMarginBottom" />
                     <ObjectStatus text="{i18n>card.totalLocations.sub}" state="Information" class="cardStatus"/>
                </VBox>

                <VBox class="card" alignItems="Center">
                    <Title text="{i18n>card.activeLocations}" class="cardTitle" wrapping="true" />
                    <ObjectNumber number="2,234" state="Success"
                        class="sapUiTinyMarginTop sapUiTinyMarginBottom" />
                    <ObjectStatus text="{i18n>card.activeLocations.percent}" state="Success" />
                </VBox>

                <VBox class="card" alignItems="Center">
                    <Title text="{i18n>card.avgUtilization}" class="cardTitle" wrapping="true" />
                    <ObjectNumber number="68%" state="Warning"
                        class="sapUiTinyMarginTop sapUiTinyMarginBottom" />
                    <ObjectStatus text="{i18n>card.avgUtilization.sub}" state="Warning" />
                </VBox>

                <VBox class="card" alignItems="Center">
                    <Title text="{i18n>card.tempZones}" class="cardTitle" wrapping="true" />
                    <ObjectStatus text="{i18n>card.tempZones.Ambientdetails}" state="Error" class="sapUiTinyMarginTop sapUiTinyMarginBottom" />
                    <ObjectStatus text="{i18n>card.tempZones.Colddetails}" state="Error" />

                </VBox>

            </HBox>

            <Table id="tblLocations"
                items="{path: 'StorageLocationModel>/Locations'}"
                growing="true" growingScrollToLoad="true" width="100%" autoPopinMode="true" class="sapUiSmallMarginTop">

                <headerToolbar>
                    <OverflowToolbar design="Solid">
                        <content>
                            <SearchField width="25%" placeholder="{i18n>toolbar.searchPlaceholder}" liveChange=".onSearch" />
                            <Button icon="sap-icon://filter" text="{i18n>toolbar.filter}" />
                            <ToolbarSpacer />
                            <Button icon="sap-icon://download" text="{i18n>toolbar.export}" />
                            <Button icon="sap-icon://upload" text="{i18n>toolbar.import}" press="onImportStorageLocation" />
                            <Button icon="sap-icon://batch-payments" text="{i18n>toolbar.bulkCreate}" press="onBulkLocationOperations"/>
                            <Button icon="sap-icon://add" text="{i18n>toolbar.createLocation}" type="Emphasized" press="onCreateStorageLocation"/>
                        </content>
                    </OverflowToolbar>
                </headerToolbar>

                <columns>
                    <Column><Text text="{i18n>col.locationCode}" /></Column>
                    <Column><Text text="{i18n>col.locationName}" /></Column>
                    <Column><Text text="{i18n>col.zoneType}" /></Column>
                    <Column><Text text="{i18n>col.structure}" /></Column>
                    <Column><Text text="{i18n>col.capacityUsage}" /></Column>
                    <Column><Text text="{i18n>col.status}" /></Column>
                    <Column width="5rem"><Text text="{i18n>col.actions}" /></Column>
                </columns>

                <items>
                    <ColumnListItem vAlign="Middle">
                        <cells>
                            <ObjectIdentifier title="{StorageLocationModel>code}" text="{StorageLocationModel>warehouse}" />

                            <ObjectIdentifier title="{StorageLocationModel>name}" text="Last: {StorageLocationModel>updated}" />

                            <Text text="{StorageLocationModel>type}" />

                            <VBox>
                                <Text text="Structure:" />
                                <Text text="Aisle: {StorageLocationModel>structure/aisle}" visible="{= !!${StorageLocationModel>structure/aisle}}" />
                                <Text text="Rack: {StorageLocationModel>structure/rack}" visible="{= !!${StorageLocationModel>structure/rack}}" />
                                <Text text="Level: {StorageLocationModel>structure/level}" visible="{= !!${StorageLocationModel>structure/level}}" />
                                <Text text="Bin: {StorageLocationModel>structure/bin}" visible="{= !!${StorageLocationModel>structure/bin}}" />
                            </VBox>

                            <VBox>
                                <Text text="{StorageLocationModel>capacity}" />
                                <ProgressIndicator percentValue="{StorageLocationModel>usage}" displayValue="{StorageLocationModel>usage}% used"  state="{path: 'StorageLocationModel>usage', formatter: '.formatter.getUtilizationState'}" />
                            </VBox>

                            <ObjectStatus text="{StorageLocationModel>status}" state="{= ${StorageLocationModel>status} === 'Active' ? 'Success' : 'Error'}" />

                            <HBox justifyContent="Center" alignItems="Center">
                                <Button icon="sap-icon://show" type="Transparent" />
                                <Button icon="sap-icon://edit" type="Transparent" />
                                <Button icon="sap-icon://delete" type="Transparent" />
                            </HBox>
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>

        </content>
    </Page>
</mvc:View>
