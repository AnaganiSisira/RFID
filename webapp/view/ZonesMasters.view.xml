<mvc:View controllerName="rfidwarehousesuiteui.controller.ZonesMasters"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:core="sap.ui.core" displayBlock="true">
    <Page title="Zones Master" class="sapUiResponsiveContentPadding">
        <headerContent>
            <Select selectedKey="WH-001">
                <items>
                    <core:Item key="WH-001" text="WH-001 - Main Warehouse" />
                    <core:Item key="WH-002" text="WH-002 - Secondary Warehouse" />
                </items>
            </Select>
        </headerContent>

        <content>
            <HBox class="sapUiSmallMarginBottom kpiCardsContainer" justifyContent="SpaceBetween" wrap="Wrap">
                <!-- Total Zones -->
                <VBox class="card" alignItems="Center" justifyContent="Center">
                    <Title text="Total Zones" wrapping="true" level="H2" class="cardTitle"/>
                    <ObjectNumber 
                        number="25" 
                        state="Information" 
                        emphasized="true"
                        class="cardNumber" />
                    <ObjectStatus text="Warehouse Overview" state="Information" class="cardStatus"/>
                </VBox>

                <!-- Active Zones -->
                <VBox class="card" alignItems="Center" justifyContent="Center">
                    <Title text="Active Zones" wrapping="true" level="H2" class="cardTitle"/>
                    <ObjectNumber 
                        number="23" 
                        state="Success" 
                        emphasized="true"
                        class="cardNumber" />
                    <ObjectStatus text="Currently operational" state="Success" class="cardStatus"/>
                </VBox>

                <!-- Avg. Utilization -->
                <VBox class="card" alignItems="Center" justifyContent="Center">
                    <Title text="Avg. Utilization" wrapping="true" level="H2" class="cardTitle"/>
                    <ObjectNumber 
                        number="66" 
                        unit="%" 
                        state="Warning" 
                        emphasized="true"
                        class="cardNumber" />
                    <ObjectStatus text="Storage utilization" state="Warning" class="cardStatus"/>
                </VBox>

                <!-- Active Alerts -->
                <VBox class="card" alignItems="Center" justifyContent="Center">
                    <Title text="Active Alerts" wrapping="true" level="H2" class="cardTitle"/>
                    <ObjectNumber 
                        number="3" 
                        state="Error" 
                        emphasized="true"
                        class="cardNumber" />
                    <ObjectStatus text="Critical conditions" state="Error" class="cardStatus"/>
                </VBox>
            </HBox>

            <Table id="idZonesTable" inset="false" items="{
                path: 'ZonesModel>/Zones',
                sorter: { path: 'zoneName' }
            }">
                <headerToolbar>
                    <OverflowToolbar>
                        <content>
                            <SearchField width="25%" placeholder="Search by code, name, type" liveChange="onSearch" />
                            <Button icon="sap-icon://filter" text="Filters" />

                            <ToolbarSpacer />

                            <Button icon="sap-icon://download" text="Export" />
                            <!-- <Button icon="sap-icon://upload" text="Import" /> -->
                            <Button icon="sap-icon://batch-payments" text="Bulk Create" press=".onBulkOperations" />
                            <Button icon="sap-icon://add" text="Create Zone" type="Emphasized" press=".onCreateZonesMasters" />
                        </content>
                    </OverflowToolbar>
                </headerToolbar>

                <columns>
                    <Column>
                        <Text text="Zone Code" />
                    </Column>
                    <Column>
                        <Text text="Zone Name" />
                    </Column>
                    <Column>
                        <Text text="Type" />
                    </Column>
                    <Column>
                        <Text text="Area/Capacity" />
                    </Column>
                    <Column>
                        <Text text="Utilization" />
                    </Column>
                    <Column>
                        <Text text="Pallets" />
                    </Column>
                    <Column>
                        <Text text="Locations" />
                    </Column>
                    <Column>
                        <Text text="Status" />
                    </Column>
                    <Column>
                        <Text text="Actions" />
                    </Column>
                </columns>

                <items>
                    <ColumnListItem>
                        <cells>
                            <Text text="{ZonesModel>zoneCode}" />
                            <Text text="{ZonesModel>zoneName}" />
                            <Text text="{ZonesModel>type}" />
                            <Text text="{ZonesModel>areaCapacity}" />
                            <ProgressIndicator 
                                percentValue="{ZonesModel>utilization}" 
                                displayValue="{ZonesModel>utilization}%" 
                                state="{path: 'ZonesModel>utilization', formatter: '.formatter.getUtilizationState'}"
                                class="{path: 'ZonesModel>utilization', formatter: '.formatter.getUtilizationClass'}" />
                            <Text text="{ZonesModel>pallets}" />
                            <Text text="{ZonesModel>locations}" />
                            <ObjectStatus text="{ZonesModel>status}" state="{= ${ZonesModel>status} === 'Active' ? 'Success' : 'Error'}" />
                            <HBox>
                                <Button icon="sap-icon://show" press=".onViewZone" />
                                <Button icon="sap-icon://edit" press=".onEditZone" />
                                <Button icon="sap-icon://delete" press=".onDeleteZone" />
                            </HBox>
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>
        </content>
    </Page>
</mvc:View>